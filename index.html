<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Regardez la Vidéo — Aqisio</title>

  <style>
    :root { color-scheme: dark; }
    body {
      margin: 0;
      background: #0b0b0b;
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      display: grid;
      place-items: center;
      min-height: 100dvh;
    }
    iframe {
      width: 100%;
      max-width: 960px;
      aspect-ratio: 16 / 9;
      border: none;
      border-radius: 12px;
      background: #000;
    }
    .error {
      color: #ffbaba;
      background: #2b1111;
      padding: 16px;
      border-radius: 10px;
      font-size: 15px;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <main id="app">
    <div id="video-slot"></div>
    <noscript>
      <div class="error">Activez JavaScript pour afficher la vidéo.</div>
    </noscript>
  </main>

  <script>
    // ────────────────────────────────
    // Récupération des paramètres d'URL
    // ────────────────────────────────
    const qs = new URLSearchParams(window.location.search);
    const id = (qs.get('id') || '').trim();

    const videoSlot = document.getElementById('video-slot');

    if (!id) {
      const err = document.createElement('div');
      err.className = 'error';
      err.innerHTML = `
        <strong>Erreur :</strong> aucun paramètre <code>id</code> trouvé.<br><br>
        Exemple :<br>
        <code>?f=Cyril&l=GUERRY&id=0bf4f564089a51d49d457a4ce0b6fede&d=2025-01-01</code>
      `;
      videoSlot.replaceChildren(err);
    } else {
      const iframeSrc = `https://iframe.videodelivery.net/${encodeURIComponent(id)}?controls=true&playsinline=true&defaultTextTrack=fr`;
      const iframe = document.createElement('iframe');
      iframe.src = iframeSrc;
      iframe.allow = 'autoplay; encrypted-media; picture-in-picture';
      iframe.allowFullscreen = true;
      iframe.title = 'Vidéo Aqisio';
      videoSlot.replaceChildren(iframe);
    }
  </script>
</body>
</html>
